<div class="row">
  {% for p in products %}
    <div class="col col-lg-4 mb-4">
      <div class="card">
        <div class="card-image">
          {% with p.images.all.0 as img %}
            {% if img %}
              <img src="{{ MEDIA_URL }}{{ img }}" alt="{{ img }}">
            {% else %}
              <span>No images</span>
            {% endif %}
          {% endwith %}
        </div>
        <div class="card-body">
          <h3><a href="{{ p.get_absolute_url }}">{{ p.name }}</a></h3>
          ${{ p.price }}<br>
          In stock: {{ p.stock_count }}
        </div>
      </div>
    </div>
  {% empty %}
    Nothing to show.
  {% endfor %}
</div>
